<!DOCTYPE html>

<html lang="zh-CN">
    <head>
    <meta charset="utf-8">
    <!--
        Â© SukkaW
        GitHub: https://github.com/SukkaW/hexo-theme-suka
        Version: 1.1.1
    -->
    <script>
window.lsVersion = "1.1.1",
window.oldVersion = [
    
        
            "0.2.0","0.0.1","0.1.0","1.0.0","1.0.1","1.1.0"
        
    
]
</script>

    <!-- ### DNS Prefetch ### -->
    <meta http-equiv="x-dns-prefetch-control" content="on">
<!-- busuanzi -->

    <link rel="dns-prefetch" href="//busuanzi.ibruce.info">


<!-- comment -->


    <link rel="dns-prefetch" href="//disqus.com">
    <link rel="dns-prefetch" href="//zcycn-top.disqus.com">






<!-- analytics -->





    <!-- ### Meta & Title & Info ### -->
    


<meta http-equiv="X-UA-Compatible" content="IE=Edge, chrome=1">
<meta name="renderer" content="webkit">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">

<!-- Title -->
<title>zookeeperå°è°ˆ | Chlins&#39; Blog</title>

<!-- favicon -->
<!-- Favicons -->

    <link rel="shortcut icon" type="image/ico" href="/img/suka-favicon.ico">






<!-- Android Chrome Color -->



<meta name="format-detection" content="telephone=no">

<!-- Description -->
<meta name="description" content="ä»‹ç»
ZooKeeper is a centralized service...">

<!-- Keywords -->
<meta name="keywords" content=",åˆ†å¸ƒå¼">

<!-- Disable Fucking Bloody Baidu Tranformation -->
<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

    <!-- ### Import File ### -->
    
        <!-- spectre.css -->

    <link rel="stylesheet" href="/lib/spectre/spectre.min.css">


<style>
    body {
        background-color: #f8f9fa;
    }

    a, a:visited {
        color: #0070ff;
    }

    a:active, a:focus, a:hover {
        color: #0070ff;
        opacity: .75;
    }

    #post-content a,
    #post-content a:hover,
    #post-content a:focus,
    #post-content a:visited {
        color: #005eb9;
        opacity: 1;
    }

    .post-entry .card-body a {
        color: #0070ff;
    }

    .avatar {
        background: #444;
    }

    .navbar-link,
    .navbar-link:visited,
    .timeline .timeline-item .timeline-icon.icon-lg {
        color: #0070ff;
    }

    .navbar-link:hover {
        color: #0070ff;
        opacity: .8;
    }

    #search-input .btn,
    #disqus_click_btn,
    #disqus-switch-to-direct,
    #disqus-loadmore-button {
        background: #727e96;
        border-color: #727e96;
        color: #fff;
    }

    #post-toc a.post-toc-link,
    #post-toc a.post-toc-link:visited,
    .share-menu.menu .menu-item>a {
        color: #727e96;
    }

    .share-menu.menu .menu-item>a:hover,
    .share-menu.menu .menu-item>a:focus,
    .share-menu.menu .menu-item>a:visited {
        color: #50596c;
        background: #f8f9fa;
        opacity: .85;
    }
</style>

<!-- style.css -->

    <link rel="stylesheet" href="/css/style.min.css">







    <!-- Prettify Theme -->
    
    
        <link rel="stylesheet" href="/css/highlight/github.min.css">
    



    

    <!-- ### Site Verification ### -->
    


    <!-- ### RSS ### -->
    
    
        <link rel="alternate" type="application/atom+xml" href="/atom.xml">
    


    <!-- ### WebApp ### -->
    <meta name="mobile-web-app-capable" content="yes">
<meta name="application-name" content="Chlins&#39; Blog">
<meta name="msapplication-starturl" content="https://zcycn.top">

<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-title" content="Chlins&#39; Blog">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

<!-- Manifest Import -->

<!-- Open Search -->


    <!-- ### The Open Graph & Twitter Card Protocol ### -->
    


<meta property="og:title" content="zookeeperå°è°ˆ | Chlins&#39; Blog">

<meta property="og:type" content="blog">
<meta property="og:url" content="https://zcycn.top/2018/10/02/zookeeperå°è°ˆ/">
<meta property="og:image" content="https://images-1251800273.cos.ap-chengdu.myqcloud.com/blog/crrEv1fj.png">

<meta property="og:description" content="ä»‹ç»
ZooKeeper is a centralized service...">


    <meta property="og:article:tag" content=",åˆ†å¸ƒå¼">


<meta name="twitter:card" content="summary_large_image">


    <meta property="article:published_time" content="2018-10-02T02:30:32.000Z">
    <meta property="article:modified_time" content="2018-10-02T02:30:32.000Z">


<meta property="og:locale" content="zh-CN">


    <!-- ### Analytics ### -->
    








    <!-- ### Canonical link ### -->
    <link rel="canonical" href="https://zcycn.top/2018/10/02/zookeeperå°è°ˆ/">

    <!-- ### Structured Data ### -->
    






<script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "BlogPosting",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "https://zcycn.top"
    },
    "headline": "zookeeperå°è°ˆ",
    
    "image": "https://zcycn.tophttps://images-1251800273.cos.ap-chengdu.myqcloud.com/blog/crrEv1fj.png",
    
    "datePublished": "2018-10-02T02:30:32.000Z",
    "dateModified": "2018-10-02T09:50:05.910Z",
    "author": {
        "@type": "Person",
        "name": "Chlins",
        "image": {
            "@type": "ImageObject",
            "url": "https://zcycn.top/img/avater.png"
        },
        "description": ""
    },
    "publisher": {
        "@type": "Organization",
        "name": "Chlins&#39; Blog",
        "logo": {
            "@type": "ImageObject",
            "url": "https://zcycn.top/img/suka-favicon.ico"
        }
    },
    "keywords": ",åˆ†å¸ƒå¼",
    "description": "ä»‹ç»
ZooKeeper is a centralized service..."
}
</script>


    <!-- ### Custom Head ### -->
    


</head>

    <body>
        
            <!-- ### Main content ### -->
            <!-- ## Header ##-->
<header>
    <h1 class="header-title text-center"><a href="/">Chlins&#39; Blog</a></h1>

    <p class="text-center header-slogan">
        
            
                Hi, nice to meet you.
            
        
    </p>

    <section class="navbar-section text-center">
    
        <a href="/" class="navbar-link">é¦–é¡µ</a>
    
    
        <a href="/archives/" class="navbar-link">å½’æ¡£</a>
    
    
    
    
        
<div class="dropdown dropdown-right">
    <a class="navbar-link dropdown-toggle" tabindex="0">åˆ†äº«</a>
    <ul class="menu share-menu">

        <!-- Share Weibo -->
        
        <li class="menu-item">
            <a href="http://service.weibo.com/share/share.php?appkey=&title=Chlins' Blog&url=https://zcycn.top&pic=https://zcycn.top/img/suka-favicon.ico&searchPic=false&style=simple" target="_blank" rel="noopener noreferrer nofollow">åˆ†äº«åˆ°å¾®åš</a>
        </li>
        

        <!-- Share Twitter -->
        
        <li class="menu-item">
            <a href="https://twitter.com/intent/tweet?text=Chlins' Blog&url=https://zcycn.top&via=Chlins" target="_blank" rel="noopener noreferrer nofollow">åˆ†äº«åˆ° Twitter</a>
        </li>
        

        <!-- Share Facebook -->
        
        <li class="menu-item">
            <a href="https://www.facebook.com/sharer/sharer.php?u=https://zcycn.top" target="_blank" rel="noopener noreferrer nofollow">åˆ†äº«åˆ° Facebook</a>
        </li>
        

        <!-- Share Google+ -->
        
        <li class="menu-item">
            <a href="https://plus.google.com/share?url=https://zcycn.top" target="_blank" rel="noopener noreferrer nofollow">åˆ†äº«åˆ° Google+</a>
        </li>
        

        <!-- Share LinkedIn -->
        
        <li class="menu-item">
            <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://zcycn.top/archives/index.html&title=" target="_blank" rel="noopener noreferrer nofollow">åˆ†äº«åˆ° LinkedIn</a>
        </li>
        

        <!-- Share QQ -->
        
        <li class="menu-item">
            <a href="http://connect.qq.com/widget/shareqq/index.html?site=Chlins' Blog&title=&summary=nil&pics=https://zcycn.top/img/suka-favicon.ico&url=https://zcycn.top/archives/index.html" target="_blank" rel="noopener noreferrer nofollow"> åˆ†äº«åˆ° QQ</a>
        </li>
        

        <!-- Share Telegram -->
        
        <li class="menu-item">
            <a href="https://telegram.me/share/url?url=https://zcycn.top/archives/index.html&text=" target="_blank" rel="noopener noreferrer nofollow">åˆ†äº«åˆ° Telegram</a>
        </li>
        

        <!-- QRCode -->
        
        <li class="menu-item">
            <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIQAAACECAAAAAB0L9x7AAABj0lEQVR42u3aQXKDMBBEUd//0skmixSRulvgQMv12VAGDG8xJc1o9PoqOF4gQIDYAvESx58//bp2vD/67d4LohcxDJqf68cPH6+PnkveC6IfcQyc5OWzAE7eC2J/xOg8+o96DsRnINQz6WAGYk+ES2BmAajAb5tFQdyOUAnplfPbsm0QtyJs0Spgo4/+S1UO4lbESqI6G8BmxfBssAPRjzgTeO73KMkBsQdCTWQqcJN7bvAC0YtIgtItpp6Z2EB0ItLC98zAZqEgKhFqonGLIWoSc/dB9CJmH3dF8coi6jRIQWyBSIqcdDCyjT0Q9YgkQVlpyLnEBkQ3Ii1uXBKjiqjlTRwgHkMkCYpLeF3gLjVdQDyOWFn8ckGbbvAB0Y9QQeYmKTdoxSMmiApE0ohLFtTcwHa5GwjiNkTUWDfB54roKNEFUYVINvaoBpyasOSzIKoRrgGnFthWgxzEZyFWiyCZLIPYFqEac0nBHO8uAlGFcBNY2ri9FJggahDJRmE3kZ1agAdRiXjyAAECRDXiG7oZuIjABq3yAAAAAElFTkSuQmCC" alr="QRCode">
        </li>
        

    </ul>
</div>
    
    
        <a href="/atom.xml" target="_blank" class="navbar-link">RSS</a>
    
</section>
</header>

            
    <!-- ## Post ## -->
    
    


<div class="post-container">
    <div id="post-card" class="card">
        
            <!-- # Post Thumbnail # -->
            <div class="card-image" style="background-image: url('https://images-1251800273.cos.ap-chengdu.myqcloud.com/blog/crrEv1fj.png');"></div>
        
        <div class="card-item-container">
            <div class="card-inner-cell">
                <!-- # Post Header Info # -->
                <div class="card-header">
                    <h2 class="card-title h3 mb-2">zookeeperå°è°ˆ</h2>
<div class="post-header-info">
    <p class="post-header-info-left text-gray">
        <img class="author-thumb" src="/img/avater.png" alt="Chlins's Avatar">
        <span>2018-10-02</span>
        
        
            <!-- Busuanzi Post Views -->
<span id="busuanzi_container_page_pv" hidden>
    <span class="suka-devide-dot"></span>
    <span></span>
    <span id="busuanzi_value_page_pv"></span>
    <span>Views</span>
</span>
        
        
    </p>
    <div class="post-header-info-right">
        
            
<div class="dropdown dropdown-right">
<a class="dropdown-toggle" tabindex="0">åˆ†äº«æœ¬æ–‡</a>
<ul class="menu share-menu">
    <!-- Share Weibo -->
    
    <li class="menu-item">
        <a href="http://service.weibo.com/share/share.php?appkey=&title=zookeeperå°è°ˆ&url=https://zcycn.top/2018/10/02/zookeeperå°è°ˆ/index.html&pic=https://zcycn.top/img/suka-favicon.ico&searchPic=false&style=simple" target="_blank" rel="noopener noreferrer nofollow">åˆ†äº«åˆ°å¾®åš</a>
    </li>
    

    <!-- Share Twitter -->
    
    <li class="menu-item">
        <a href="https://twitter.com/intent/tweet?text=zookeeperå°è°ˆ&url=https://zcycn.top/2018/10/02/zookeeperå°è°ˆ/index.html&via=Chlins" target="_blank" rel="noopener noreferrer nofollow">åˆ†äº«åˆ° Twitter</a>
    </li>
    

    <!-- Share Facebook -->
    
    <li class="menu-item">
        <a href="https://www.facebook.com/sharer/sharer.php?u=https://zcycn.top/2018/10/02/zookeeperå°è°ˆ/index.html" target="_blank" rel="noopener noreferrer nofollow">åˆ†äº«åˆ° Facebook</a>
    </li>
    

    <!-- Share Google+ -->
    
    <li class="menu-item">
        <a href="https://plus.google.com/share?url=https://zcycn.top/2018/10/02/zookeeperå°è°ˆ/index.html" target="_blank" rel="noopener noreferrer nofollow">åˆ†äº«åˆ° Google+</a>
    </li>
    

    <!-- Share LinkedIn -->
    
    <li class="menu-item">
        <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://zcycn.top&title=Chlins' Blog" target="_blank" rel="noopener noreferrer nofollow">åˆ†äº«åˆ° LinkedIn</a>
    </li>
    

    <!-- Share QQ -->
    
    <li class="menu-item">
        <a href="http://connect.qq.com/widget/shareqq/index.html?site=Chlins' Blog&title=Chlins' Blog&summary=nil&pics=https://zcycn.top/img/suka-favicon.ico&url=https://zcycn.top" target="_blank" rel="noopener noreferrer nofollow"> åˆ†äº«åˆ° QQ</a>
    </li>
    

    <!-- Share Telegram -->
    
    <li class="menu-item">
        <a href="https://telegram.me/share/url?url=https://zcycn.top&text=Chlins' Blog" target="_blank" rel="noopener noreferrer nofollow">åˆ†äº«åˆ° Telegram</a>
    </li>
    

    <!-- QRCode -->
    
    <li class="menu-item">
        <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJQAAACUCAAAAABQV18IAAAB2klEQVR42u3awY7CMAxF0f7/T8MKCarY7zktUuLebhhgGs7CtRMnx2vB6wAFChSoAepIrtH3n89+Bvt6f/6faJzzmKB6oYZBFww6+nt0T4SLfgdUP1QUzOqz8wMTQdTvgHoOapRko6TqBjyoZ6NUsc2CXxVmUL1RaaFMBhxO1kThvjxLALU8Si0c7nq9dTUDallUqQEhFqhZcf5b1wXUcqhz0nMaHXaBNRKrzOigtkRFE7RRoLtXFOTZ74HqiVIDZq9OQ6Q8SwC1HcoNeCdxuvfJ5Alqa5Qz0Xcb9qPi6240geqHuhLc6gGJCrq1cAC1HSormNWCXNm4BPUM1GzBdZq3TkIF1QOlJmCVQxFOsyRNtKBaoLLFZAaPIBlQLmRBtUFVb1YHKNzNS1A9UdNBWXwYrEkkqBYolTCdBr+TdNVkEFQflArC7FCXu5mkmvqg+qGcZDjT+HcfGFA9UdWGhXsI0DlkCKofyk18M4e3VNIE1Q/lHLpxGvfOoS2VjEH1QFUmZw7Y3Qy3D3WB2hJVCXC7uCaBHn4HqhVKbUReObQVHgwEBUo0Wp0inQU7qGegZop2pXEGqi/KOeDnNjNUogXVH+U2N6rF1pn0XVrNgFoStdIFChQoUF/XG3yvEaCX7f+NAAAAAElFTkSuQmCC" alt="QRCode">
    </li>
    

</ul>
</div>
        
    </div>
</div>
                </div>
                <div class="card-body">
                    
                        
                            <div id="post-toc">
                                <ol class="post-toc"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#ä»‹ç»"><span class="post-toc-number">1.</span> <span class="post-toc-text">ä»‹ç»</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#åº”ç”¨åœºæ™¯"><span class="post-toc-number">2.</span> <span class="post-toc-text">åº”ç”¨åœºæ™¯</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Zabåè®®"><span class="post-toc-number">3.</span> <span class="post-toc-text">Zabåè®®</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#é›†ç¾¤çŠ¶æ€"><span class="post-toc-number">3.1.</span> <span class="post-toc-text">é›†ç¾¤çŠ¶æ€</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Reference"><span class="post-toc-number">4.</span> <span class="post-toc-text">Reference</span></a></li></ol>
                            </div>
                        
                    
                    <article id="post-content">
                        <h3 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h3><blockquote>
<p>ZooKeeper is a centralized service for maintaining configuration information, naming, providing distributed synchronization, and providing group services. All of these kinds of services are used in some form or another by distributed applications. Each time they are implemented there is a lot of work that goes into fixing the bugs and race conditions that are inevitable. Because of the difficulty of implementing these kinds of services, applications initially usually skimp on them ,which make them brittle in the presence of change and difficult to manage. Even when done correctly, different implementations of these services lead to management complexity when the applications are deployed.</p>
</blockquote>
<p>ä»¥ä¸Šæ‘˜è‡ªå®˜æ–¹æ–‡æ¡£å¯¹zookeeperçš„å®šä¹‰å’Œä¸»è¦åŠŸèƒ½çš„ä»‹ç»ï¼Œç®€å•çš„æ¥è¯´ï¼Œå¯ä»¥å°†å®ƒå®šä¹‰ä¸ºä¸€ä¸ªåˆ†å¸ƒå¼çš„åè°ƒå™¨ï¼Œæœ¬èº«å®ƒä¹Ÿæ˜¯Google chubbyæ¡†æ¶çš„å¼€æºå®ç°ï¼Œå¯ä»¥ç”¨å®ƒæ¥å®ç°åˆ†å¸ƒå¼é”ï¼Œé…ç½®ä¸­å¿ƒç­‰åŠŸèƒ½ã€‚zookeeperçš„æ–‡ä»¶å­˜å‚¨æ¨¡å‹æœ¬èº«ä¹Ÿæ˜¯éå¸¸çš„å‹å¥½çš„ï¼Œæ˜¯ä¸€ç§ç±»ä¼¼æ ‡å‡†æ–‡ä»¶ç³»ç»Ÿçš„æ ‘å½¢ç»“æ„ï¼Œå¦‚ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">/------</span><br><span class="line">       /Services-------</span><br><span class="line">       				   /Service1</span><br><span class="line">       				   /Service2</span><br><span class="line">       </span><br><span class="line">       /Groups---------</span><br><span class="line">       				   /Group1</span><br><span class="line">       				   /Group2</span><br></pre></td></tr></table></figure>
<p>æ•°æ®ç»“æ„ç‰¹å¾ï¼š</p>
<ol>
<li>ç›®å½•é¡¹ç§°ä¸ºznodeï¼Œå”¯ä¸€æ ‡è¯†</li>
<li>znodeä¸‹å¯ä»¥åˆ›å»ºå­znodeï¼Œæ¯ä¸ªznodeå¯ä»¥å­˜å‚¨æ•°æ®ï¼Œç±»ä¼¼redisä¸­çš„key-value</li>
<li>znodeå¯ä»¥å®šä¹‰ç‰ˆæœ¬</li>
<li>znodeå¯ä»¥é€šè¿‡sessionä¸serverä¹‹é—´åˆ›å»ºä¸´æ—¶èŠ‚ç‚¹ï¼Œå³å½“sessionå¤±æ•ˆåï¼Œè‡ªåŠ¨åˆ é™¤znode</li>
<li>é¡ºåºèŠ‚ç‚¹ï¼Œå³zkæä¾›è‡ªåŠ¨å‘åç¼–å·èŠ‚ç‚¹ï¼Œä¾‹å¦‚ app1, app2, app3 â€¦â€¦</li>
<li>æä¾›watchæœºåˆ¶ï¼Œå¯ä»¥å¯¹znodeè¿›è¡Œç›‘æ§</li>
</ol>
<h3 id="åº”ç”¨åœºæ™¯"><a href="#åº”ç”¨åœºæ™¯" class="headerlink" title="åº”ç”¨åœºæ™¯"></a>åº”ç”¨åœºæ™¯</h3><p>ğŸ‘†ä»‹ç»äº†zkçš„å­˜å‚¨çš„æ•°æ®ç»“æ„ï¼Œç°åœ¨æˆ‘ä»¬çœ‹çœ‹å¯ä»¥ç”¨å®ƒæ¥å®ç°å“ªäº›åŠŸèƒ½</p>
<ul>
<li><p>åˆ†å¸ƒå¼é”</p>
<p>â€‹        zkå¯ä»¥å®ç°è·¨ä¸»æœºä¹‹é—´çš„é”ï¼Œå®ç°çš„æ–¹æ³•å…¶å®å°±æ˜¯åˆ›å»ºä¸€ä¸ªä¸´æ—¶çš„ç›®å½•èŠ‚ç‚¹ï¼ŒæŸ¥çœ‹è¯¥ç›®å½•ä¸‹çš„å­ç›®å½•ä¸­èŠ‚ç‚¹ç¼–å·æœ€å°çš„é‚£ä¸ªèŠ‚ç‚¹ï¼Œå¦‚æœæ˜¯è‡ªå·±åˆ›å»ºçš„ï¼Œåˆ™æ‹¿åˆ°äº†é”ï¼Œå¦åˆ™å¯¹æ¯”è‡ªå·±å°çš„ä¸­æœ€å¤§çš„é‚£ä¸ªèŠ‚ç‚¹å»ºç«‹ç›‘å¬å™¨ï¼Œæ³¨æ„è¿™é‡Œä¸ºä»€ä¹ˆä¸æ˜¯å¯¹æœ€å°çš„é‚£ä¸ªå»ºç«‹ç›‘å¬å™¨æ˜¯ä¸ºäº†é¿å…ä¸€æ—¦æœ€å°èŠ‚ç‚¹çš„é”é‡Šæ”¾ï¼Œè€Œå¯¼è‡´éœ€è¦å‘æ‰€æœ‰ç›‘å¬èŠ‚ç‚¹å‘é€äº‹ä»¶è€Œå¯¼è‡´çš„<code>ç¾Šç¾¤æ•ˆåº”</code>ï¼Œå½“è‡ªå·±ä¸ºé›†ç¾¤ä¸­æœ€å°çš„èŠ‚ç‚¹æ—¶ï¼Œå³æ‹¿åˆ°é”ï¼Œé‡Šæ”¾é”åªè¦åˆ é™¤è‡ªå·±åˆ›å»ºçš„znodeå°±å¯ä»¥äº†ã€‚</p>
</li>
<li><p>é˜Ÿåˆ—</p>
<p>â€‹       åˆ›å»ºé¡ºåºèŠ‚ç‚¹ï¼Œæ¯æ¬¡è¿”å›èŠ‚ç‚¹ç¼–å·æ•°æœ€å°çš„é‚£ä¸ªï¼Œå³å®ç°äº†FIFOã€‚</p>
</li>
<li><p>å‘½åæœåŠ¡</p>
<p>â€‹        é€šè¿‡znodeé—´çš„å±‚æ¬¡å…³ç³»ä»¥åŠé¡ºåºèŠ‚ç‚¹çš„ç‰¹æ•ˆå¯ä»¥å®ç°æ›´åŠ æ–¹ä¾¿å¿«æ·çš„æœåŠ¡å‘½åã€‚</p>
</li>
<li><p>é…ç½®ä¸­å¿ƒ</p>
<p>â€‹        é›†ç¾¤ä¸­å¦‚æœæŸä¸ªé…ç½®å˜æ›´ï¼Œéœ€è¦æ‰€æœ‰è¿è¡Œçš„appåˆ‡æ¢è‡³æ–°çš„é…ç½®ï¼Œå¦‚æœæ‰‹å·¥å»æ“ä½œï¼Œå½“é›†ç¾¤è§„æ¨¡å¾ˆå¤§æ—¶ï¼Œæ— å¼‚äºæ˜¯éå¸¸ç¹ççš„ä¸€ä¸ªå·¥ä½œï¼Œè¿™æ—¶å€™æˆ‘ä»¬å¯ä»¥è®©æ‰€æœ‰çš„appçš„å»ç›‘æ§é…ç½®ç›®å½•ï¼Œç”±åº”ç”¨è‡ªä¸»é‡å¯ã€‚</p>
</li>
<li><p>é›†ç¾¤ç®¡ç†</p>
<p>â€‹        é›†ç¾¤çš„ç®¡ç†ä¸»è¦æ˜¯ä¸¤ä¸ªæ ¸å¿ƒåŠŸèƒ½ï¼Œå³æ–°æœºå™¨çš„ä¸Šçº¿å’Œæ—§æœºå™¨çš„ä¸‹çº¿ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆæ–¹ä¾¿çš„é€šè¿‡watchæœºåˆ¶æ¥å®ç°ã€‚</p>
</li>
</ul>
<h3 id="Zabåè®®"><a href="#Zabåè®®" class="headerlink" title="Zabåè®®"></a>Zabåè®®</h3><p>zookeeperä¹‹æ‰€ä»¥èƒ½å¤Ÿå®ç°åˆ†å¸ƒå¼ï¼Œä¿éšœæ•°æ®çš„ä¸€è‡´æ€§ï¼Œæ˜¯é€šè¿‡zookeeper atomic broadcastæ¥ä¿éšœçš„ï¼Œå³zookeeperåŸå­å¹¿æ’­åè®®ï¼Œåœ¨åˆ†å¸ƒå¼é¢†åŸŸï¼Œæœ‰ä¸€ä¸ªéå¸¸ç»å…¸çš„ç†è®ºï¼Œå³CAPç†è®ºï¼Œä¹ŸåŒæ ·æœ‰ä¸€ä¸ªéå¸¸ç»å…¸çš„åˆ†å¸ƒå¼ç®—æ³•ï¼Œå³Paxosç®—æ³•ï¼Œä¸è¿‡Paxosç®—æ³•çš„å·¥ç¨‹å®ç°è¾ƒä¸ºå¤æ‚ï¼Œæ‰€ä»¥åæ¥å‡ºç°äº†Multi Paxosç®—æ³•ï¼Œä¾‹å¦‚zabå’Œraftç­‰ã€‚</p>
<h4 id="é›†ç¾¤çŠ¶æ€"><a href="#é›†ç¾¤çŠ¶æ€" class="headerlink" title="é›†ç¾¤çŠ¶æ€"></a>é›†ç¾¤çŠ¶æ€</h4><ol>
<li><p>å´©æºƒæ¢å¤çŠ¶æ€</p>
<p>è¿›å…¥æƒ…å†µï¼š</p>
<ul>
<li>æœåŠ¡å¯åŠ¨</li>
<li>leaderæœåŠ¡å´©æºƒæˆ–è€…ç½‘ç»œæ•…éšœ</li>
<li>æ–°èŠ‚ç‚¹åŠ å…¥é›†ç¾¤ä¸”é›†ç¾¤å¤„äºå¹¿æ’­çŠ¶æ€</li>
</ul>
<p>æ­¤æ—¶é›†ç¾¤å¼‚å¸¸ï¼Œéœ€è¦å¼€å§‹æ–°çš„ä¸€è½®é€‰ä¸»ï¼ŒèŠ‚ç‚¹çŠ¶æ€åˆå¯åˆ†ä¸ºä»¥ä¸‹å››ç§ï¼š</p>
<ul>
<li>looking é›†ç¾¤æ— leaderï¼Œå‡†å¤‡é€‰ä¸»</li>
<li>following é›†ç¾¤å­˜åœ¨leader</li>
<li>leading å³å”¯ä¸€leader</li>
<li>observing è§‚å¯Ÿè€…</li>
</ul>
<p>æ•°æ®æ¨¡å‹ï¼š</p>
<ul>
<li>sid server idæ ‡è¯†æœºå™¨</li>
<li>zxid äº‹åŠ¡id é€’å¢</li>
</ul>
<p>é€‰ä¸»è§„åˆ™ï¼š</p>
<ul>
<li>åˆå§‹çŠ¶æ€ä¼šç»™è‡ªå·±æŠ•ç¥¨</li>
<li>æ¥æ”¶åˆ°å…¶ä»–æœåŠ¡å™¨çš„æŠ•ç¥¨åï¼Œä¼˜å…ˆæ£€æŸ¥zxidï¼Œzxidæ¯”è¾ƒå¤§çš„ä¼˜å…ˆä½œä¸ºleaderï¼Œè‹¥ç›¸åŒï¼Œåˆ™æ¯”è¾ƒsidï¼Œå¤§çš„ä¼˜å…ˆä½œä¸ºleader</li>
<li>è¶…è¿‡é›†ç¾¤åŠæ•°çš„æœºå™¨æŠ•äº†ä¸€ä¸ªnodeï¼Œåˆ™æŠ•ç¥¨ç»“æŸï¼Œnodeè®¾ç½®å„è‡ªä¸ºleaderæˆ–è€…follower</li>
</ul>
</li>
<li><p>æ¶ˆæ¯å¹¿æ’­çŠ¶æ€</p>
<p>è¿›å…¥æƒ…å†µï¼š</p>
<p>é›†ç¾¤å·²æœ‰leaderï¼Œä¸”è¶…è¿‡åŠæ•°çš„æœºå™¨çŠ¶æ€åŒæ­¥å®Œæˆ</p>
<p>è¿™ä¸ªçŠ¶æ€å°±æ˜¯é›†ç¾¤çš„æ­£å¸¸å·¥ä½œæ€ï¼Œä¹Ÿå°±æ˜¯æ•°æ®åŒæ­¥çš„çŠ¶æ€</p>
<ul>
<li>è¯»è¯·æ±‚ç”±followeræˆ–observerç›´æ¥è¿”å›ç»™client</li>
<li>å†™è¯·æ±‚ç»Ÿä¸€éƒ½ä¼šè¢«è½¬å‘ç»™leaderï¼Œleaderåˆ†é…å”¯ä¸€çš„äº‹åŠ¡idï¼Œç„¶åå‘followerå‘èµ·proposalï¼Œfolloweræ”¶åˆ°åé¦–å…ˆä»¥äº‹åŠ¡æ—¥å¿—çš„å½¢å¼å†™åˆ°ç£ç›˜ä¸Šï¼Œé˜²æ­¢ä¸¢å¤±ï¼Œç„¶ååœ¨å†™å…¥æˆåŠŸåï¼Œå‘leaderå‘é€æˆåŠŸå†™å…¥çš„Ackï¼Œleaderæ”¶åˆ°åŠæ•°ä»¥ä¸Šçš„followerçš„Ackåï¼Œå¹¿æ’­commitæ¶ˆæ¯é€šçŸ¥followerè¿›è¡Œäº‹åŠ¡æäº¤ï¼ŒåŒæ—¶è‡ªèº«ä¹Ÿä¼šè¿›è¡Œcommit</li>
</ul>
</li>
</ol>
<h3 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h3><p>æ„Ÿè°¢å¹¿å¤§ç½‘å‹çš„çƒ­å¿ƒåˆ†äº«</p>
<p><a href="https://mp.weixin.qq.com/s/DjYEreC-5ADiZXKdlzpnxw" target="_blank" rel="noopener">https://mp.weixin.qq.com/s/DjYEreC-5ADiZXKdlzpnxw</a></p>
<p><a href="http://zookeeper.apache.org/" target="_blank" rel="noopener">http://zookeeper.apache.org/</a></p>
<p><a href="https://www.ibm.com/developerworks/cn/opensource/os-cn-zookeeper/index.html" target="_blank" rel="noopener">https://www.ibm.com/developerworks/cn/opensource/os-cn-zookeeper/index.html</a></p>
<p><a href="https://www.cnblogs.com/felixzh/p/5869212.html" target="_blank" rel="noopener">https://www.cnblogs.com/felixzh/p/5869212.html</a></p>

                    </article>
                    


    <blockquote id="date-expire-notification" class="post-expired-notify">æœ¬æ–‡æœ€åæ›´æ–°äº <span id="date-expire-num"></span> å¤©å‰ï¼Œæ–‡ä¸­æ‰€æè¿°çš„ä¿¡æ¯å¯èƒ½å·²å‘ç”Ÿæ”¹å˜</blockquote>
    <script>
        var dateUpdate = Date.parse("2018-10-02");
        var nowDate = new Date();
        var a = nowDate.getTime();
        var b = a - dateUpdate;
        var daysUpdateExpire = Math.floor(b/(24*3600*1000));
        if (daysUpdateExpire >= 120) {
            document.getElementById('date-expire-num').innerHTML = daysUpdateExpire;
        } else {
            document.getElementById('date-expire-notification').style.display = 'none';
        }
    </script>


<p class="post-footer-info mb-0 pt-0">æœ¬æ–‡å‘è¡¨äº&nbsp;<time datetime="2018-10-02T02:30:32.000Z" itemprop="datePublished">2018-10-02</time>

</p>
<p class="post-footer-info mb-0 pt-2">



<span class="post-tags-list mt-2">


<a class="post-tags-list-item" href='/tags/åˆ†å¸ƒå¼/'>#&nbsp;åˆ†å¸ƒå¼</a>

</span>


</p>

                </div>
                
<div class="post-nav px-2 bg-gray">
<ul class="pagination">
    <!-- Prev Nav -->
    

    <!-- Next Nav -->
    
        <li class="page-item page-next">
            <a href="/2018/09/14/sync-Poolä½¿ç”¨/">
                <div class="page-item-title"><i class="icon icon-forward" aria-hidden="true"></i></div>
                <div class="page-item-subtitle">sync.Poolä½¿ç”¨</div>
            </a>
        </li>
    
</ul>
</div>

                
                    <!-- # Comment # -->
                    
                        <div class="card-footer post-comment">
                            <div id="disqus_thread"></div>
<script>
    var disqus_config = function () {
        this.page.url = 'https://zcycn.top/2018/10/02/zookeeperå°è°ˆ/'; // Replace PAGE_URL with your page's canonical URL variable
        this.page.identifier = 'https://zcycn.top/2018/10/02/zookeeperå°è°ˆ/'; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
</script>
<script id="disqus-thread-script">
    (function() { // DON'T EDIT BELOW THIS LINE
        var d = document;
        var s = d.createElement('script');
        s.src = '//zcycn-top.disqus.com/embed.js';
        s.setAttribute('data-timestamp', + new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>

                        </div>
                    
                
            </div>
        </div>
    </div>
</div>

            <!-- ### Footer ### -->
            <footer class="text-center">
    <!-- footer copyright -->
    <p class="footer-copyright mb-0">Copyright&nbsp;Â©&nbsp;<span data-year></span>
        <a class="footer-copyright-a" href="https://zcycn.top">Chlins&#39; Blog</a>
    </p>
    <!-- footer custom text -->
    <p class="footer-text mb-0">
    
    </p>
    <!-- footer develop info -->
    <p class="footer-develop mb-0">
        
            
    <!-- Busuanzi User Views -->
    <span id="busuanzi_container_site_uv" hidden>
        <span></span>
        <span id="busuanzi_value_site_uv"></span>
        <span>Viewers</span>
        
            <span>|</span>
        
    </span>



        
        
        Powered by&nbsp;<!--
         --><a href="https://hexo.io" target="_blank" class="footer-develop-a" rel="nofollow noopener noreferrer">Hexo</a><span class="footer-develop-divider"></span>Theme&nbsp;-&nbsp;<!--
         --><a href="https://github.com/SukkaW/hexo-theme-suka" target="_blank" class="footer-develop-a" rel="noopener">Suka</a>
    </p>
</footer>

        

        <!-- ### Import File ### -->
        <!-- ### Footer JS Import ### -->

<script>
window.lazyLoadOptions = {
    elements_selector: ".lazyload",
    threshold: 50
};



    /* Copyright */
    var copyrightNow = new Date().getFullYear();
    var copyrightContent = document.querySelector('span[data-year]')
    
        copyrightContent.textContent = copyrightNow
    



/* Cnosole Log */
console.log('\n %c Suka Theme (hexo-theme-suka) | Â© SukkaW | Verision 1.1.1 %c https://github.com/SukkaW/hexo-theme-suka \n', 'color: #fff; background: #444; padding:5px 0;', 'background: #bbb; padding:5px 0;');
</script>

<!-- vanilla-lazyload -->

    <script src="/lib/vanilla-lazyload/lazyload.min.js" async></script>



    <!-- Busuanzi -->
    
    <script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script>


<!-- Offset -->







<!-- gallery.js -->


<!-- Comment -->

    
        <script id="dsq-count-scr" src="https://zcycn-top.disqus.com/count.js" async></script>

    


<!-- ### Custom Footer ### -->


    </body>

</html>